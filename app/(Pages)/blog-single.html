<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <title>AAPC | Blog Single</title>
    <meta name="description" content="AAPC operates in seamless collaboration with the NYC Department of Buildings (DOB) and other pertinent entities throughout the architectural process demonstrating a meticulous commitment to not only adhere to regulations but also navigate them with precision when intervening in established spaces">
    <meta name="keywords" content="Architecture, AAPC, Building, Design, Drafting">
    <link rel="author" href="Azark Inc" />
    <link rel="canonical" href="https://aapc.nyc/" />
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FFDC32">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css'>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css'>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.2/css/all.css'>

    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/blog-details.css">

</head>
<style>
    #the-text{
        margin: 5vmax;
    }

    #hotels img{
        width: 100%;
        padding: 5%;
    }
</style>
<body>
<nav class="navbar navbar-expand-md">
    <div class="container-fluid">
        <a class="navbar-brand d-md-none" href="/">
            <img src="/img/AAPC_Logo.png" alt="">
        </a>
        <button class="navbar-toggler navbar-dark" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/services">Services</a>
                </li>
                <a class="navbar-brand d-none d-md-block" href="/">
                    <img src="/img/AAPC_Logo.png" alt="">
                </a>
                <li class="nav-item">
                    <a class="nav-link" href="/projects">Projects</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/contact">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div data-tilt data-tilt-glare data-tilt-max-glare="0.1"></div>
<div id="hotels">
    <!-- partial:index.partial.html -->


</div>

<script>
    function GetURLParameter(sParam)
    {
        var sPageURL = window.location.search.substring(1);
        var sURLVariables = sPageURL.split('&');
        for (var i = 0; i < sURLVariables.length; i++)
        {
            var sParameterName = sURLVariables[i].split('=');
            if (sParameterName[0] == sParam)
            {
                return sParameterName[1];
            }
        }
    }

    const BLOG_URL = 'https://azark-blog-backend.onrender.com/api/posts/title/';
    const ID = GetURLParameter('id').toString();

    async function customFetch() {
        try {
            const res = await fetch(BLOG_URL + ID);
            if (!res.ok) {
                throw new Error(`${res.status} : ${res.statusText}`)
            }

            const json = await res.json();
            return json;
        } catch (err) {
            console.error(err.message)
        }
    }

    const createListItem = (item) => {
        if (item.categories.includes("aapc")) {
            document.title = `AAPC | ${item.title}`;
            document.querySelector('meta[name="keywords"]').setAttribute("content", item.keywords);
            // const date = new Date(item.updatedAt);
            // const formattedDate = date.getDate() +  " " + date.toLocaleString('default', { month: 'long' }) + " " + date.getFullYear()
            const formattedCreated = new Date(item.createdAt).toLocaleDateString('en-US', {
                month: "long",  // Use "short" for abbreviated month
                day: "numeric",
                year: "numeric",
            })
            const formattedUpdated =  new Date(item.updatedAt).toLocaleDateString('en-US', {
                month: "long",  // Use "short" for abbreviated month
                day: "numeric",
                year: "numeric",
            })
            //console.log(formattedCreated === formattedUpdated)

            // ISSUE: technically the dom elements are not loaded yet,
            // if (formattedCreated === formattedUpdated) document.getElementById('updatedDate').classList.add('hidden')
            // console.log(document.getElementById('updatedDate'));
            if(formattedCreated === formattedUpdated){
            return `     <div class="container" style="position: relative">
        <div  class="carousel-container row">
            <h1 class="project-title" data-tilt data-tilt-glare data-tilt-max-glare="0.1">${item.title}</h1>

            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                <img src="${item.photo}" style="width: 100%"/>

            </div>

            <div class="stats" data-tilt data-tilt-glare data-tilt-max-glare="0.1">
                <h3>${item.author}</h3>
                <h3 id="createdDate">Written: ${formattedCreated}</h3>
                <!--<h3>stat</h3>
                <h3 style="border-right: none">stat</h3>-->
            </div>
        </div> <!-- /row -->
    </div> <!-- /container -->

    <div class="flex-container" style="position:relative;">
        <div class="flex-item-left">
        </div>

        <div class="flex-item-right">
            <div id="the-text" class="about-text">
                ${item.desc}
            </div>

        </div>
    </div>`}
            return `     <div class="container" style="position: relative">
        <div  class="carousel-container row">
            <h1 class="project-title" data-tilt data-tilt-glare data-tilt-max-glare="0.1">${item.title}</h1>

            <div id="myCarousel" class="carousel slide" data-ride="carousel">
                <img src="${item.photo}" style="width: 100%"/>

            </div>

            <div class="stats" data-tilt data-tilt-glare data-tilt-max-glare="0.1">
                <h3>${item.author}</h3>
                <h3 id="createdDate">Written: ${formattedCreated}</h3>
                <h3 id="updatedDate">Updated: ${formattedUpdated}</h3>
                <!--<h3>stat</h3>
                <h3 style="border-right: none">stat</h3>-->
            </div>
        </div> <!-- /row -->
    </div> <!-- /container -->

    <div class="flex-container" style="position:relative;">
        <div class="flex-item-left">
        </div>

        <div class="flex-item-right">
            <div id="the-text" class="about-text">
                ${item.desc}
            </div>

        </div>
    </div>`
        }
    }

    const getPosts = async () => {
        const data = await customFetch();
        const post = createListItem(data)


        const insertBefore = (element, htmlString) => element.insertAdjacentHTML("afterbegin", htmlString);

        const element = document.getElementById("hotels");

        return insertBefore(element, `${post}`)
    }

    getPosts()

</script>




<div style="position: relative; width: 85%; border-top: rgba(255, 255, 255, 0.40) solid 1px; margin: auto">
    <footer style="position: relative; border-bottom: rgba(255, 255, 255, 0.40) solid 1px; margin-bottom: 1vh; display: flex">
        <div class="footer-left">
            <img src="/img/AAPC_Logo.png" id="footer-img" class="nav-img"/>
            <p style="opacity: .6; margin-bottom: 3vh; line-height: 2.5">AAPC is an all-encompassing, conscious team of experts that take pride in investing in the future of buildings, our clients and their clients.</p>
        </div>
        <div class="footer-middle" >
            <h2 style="border-bottom: #FFDC32 2px solid; display: inline-block">Contact Us</h2>
            <p onclick="window.open('https://maps.app.goo.gl/3S2kgXWk48vREADu9', '_blank')"><span class="fas fa-location-arrow text-white"></span>                    130 W 37th Street New York, NY 10018
            </p>
            <p onclick="window.location.href = 'tel:212-547-9050'"><span class="fas fa-phone text-white"></span>212-547-9050</p>
            <p onclick="window.location.href = 'mailto:admin@aapc.nyc';"><span class="fas fa-envelope text-white"></span>admin@aapc.nyc</p>
        </div>
        <div class="footer-right">
            <h2 style="border-bottom: #FFDC32 2px solid; display: inline-block">Pages</h2>
            <p onclick="location.assign('/');">Home</p>
            <p onclick="location.assign('/services');">Services</p>
            <p onclick="location.assign('/projects');">Projects</p>
            <p onclick="location.assign('/contact');">Contact</p>
            <p onclick="location.assign('/blog');">Blog</p>
        </div>
    </footer>
    <a class="pptos" href="/privacy-policy">Privacy Policy</a>
</div>


<script>
    function navTest() {
        location.assign('./project-details-template.html');
    }
</script>

<!-- partial -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.2.0/js/bootstrap.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js'></script>
<script src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.js'></script>
<script src="/js/vanilla-tilt.js"></script>
<script src="/js/project-details.js"></script>


<link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
<script src="https://assets.calendly.com/assets/external/widget.js" type="text/javascript" async></script>
<script type="text/javascript">window.onload = function () {
    Calendly.initBadgeWidget({
        url: 'https://calendly.com/general-services',
        text: 'Free Consultation',
        color: '#FFDC32',
        textColor: '#1b1b1b',
        branding: false,
        zIndex: 100
    });
}</script>

</body>

</html>

